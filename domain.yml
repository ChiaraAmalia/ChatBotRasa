version: "3.1"

intents:
  - salutare
  - arrivederci
  - affermativo
  - negare
  - salutare_bene
  - non_felice
  - bot_challenge
  - tempo
  - categoria
  - vedi_packaging
  - acquisto_prodotto
  - inform
  - stop
  - vedi_foto
  - vedi_categorie
  - brand
  - viewBrandProduct
  - snack_meno_calorie

entities:
  - dimensione_prodotto
  - tipo_prodotto
  - prodotto
  - brand
  - calorie

slots:
  dimensione_prodotto:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: prodotto_form
            requested_slot: dimensione_prodotto

  tipo_prodotto:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: prodotto_form
            requested_slot: tipo_prodotto
  
  brand:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text

  prodotto:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: image_form
            requested_slot: prodotto
          - active_loop: packaging_form
            requested_slot: prodotto
  
  calorie:
    type: float
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: calorie_form
            requested_slot: calorie

forms:
  prodotto_form:
    required_slots:
      - tipo_prodotto
      - dimensione_prodotto

  image_form:
    required_slots:
      - prodotto
  
  packaging_form:
    required_slots:
      - prodotto
  
  calorie_form:
    required_slots:
      - calorie

responses:
  utter_greet:
  - text: "Ciao! Come stai"

  utter_cheer_up:
  - text: "Ecco qualcosa per tirarti su di morale:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
  - text: "Ti ha aiutato?"

  utter_happy:
  - text: "Ottimo, continua!"

  utter_goodbye:
  - text: "Ciao"

  utter_iamabot:
  - text: "Sono un bot, che conosce i prodotti della Mulino Bianco. Realizzato da KaffeeHause"

  utter_prodotto_slots:
  - text: "Io adesso ordinerò un {tipo_prodotto} da {dimensione_prodotto}"

  utter_ask_continue:
  - text: "Sei sicuro di voler uscire dalla form ?"

  utter_ask_dimensione_prodotto:
  - text: "Di che dimensione deve essere la confezione richiesta ? "

  utter_ask_tipo_prodotto:
  - text: "Che tipo di prodotto vuoi acquistare ? "

  utter_submit:
  - text: "Io adesso ordinerò il prodotto per te"

  utter_ask_nome:
  - text: "Di che prodotto vuoi vedere l'immagine? "

  utter_ask_packaging:
  - text: "Di che prodotto vuoi vedere il packaging? "

  utter_ok:
  - text: "Perfetto, procediamo con l'acquisto"

actions:
- action_hello_world
- action_categoria
- utter_greet
- utter_cheer_up
- utter_did_that_help
- utter_happy
- utter_goodbye
- utter_iamabot
- utter_ask_packaging
- utter_prodotto_slots
- utter_ask_continue
- utter_ask_dimensione_prodotto
- utter_ask_tipo_prodotto
- validate_prodotto_form
- utter_submit
- utter_ask_nome
- non_ho_capito
- utter_ok
- get_image_from_db
- submit_acquisto
- get_brand
- get_prodotti_brand
- action_packaging
- get_snack_meno_cal

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
